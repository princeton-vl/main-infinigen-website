---
sidebar_label: "Installation"
sidebar_position: 1
---

# Installation

Our installation instructions have been tested on the following systems:

- Apple Silicon (M1/M2) (â‰¤ MacOS Monterey)
- Ubuntu 22
- Windows WSL

:::caution Known issues

- Apple Silicon (M1/M2) (MacOS Monterey)

:::

For x86 architectures, we also have [Docker intructions](#docker-instructions)

For help with installation, please post to our Github issues page.

## Setup

Clone the infinigen repo:

```
git clone --recursive <TODO>
```

Create a conda environment:

```
conda create --name infinigen python=3.10
conda activate infinigen
```

**(Optional, Ubuntu)** in order to use our OpenGL-based system for producing dense annotations, install the following dependencies:

```
sudo apt-get install libglm-dev libglew-dev libglfw3-dev libgles2-mesa-dev zlib1g-dev
```

Alternatively, we support generating ground-truth from Blender's built-in render passes.

Finally, run the install script

```
bash install.sh
```

If you want to run with CUDA, compile on a CUDA machine.

### Troubleshooting

If the above didnt work for you, or you wish to rebuild part of the project, below are instructions for manually compiling the terrain-related C++ code

```
cd /worldgen/terrain/cpp_utils
# on linux including ionic
blender-3.1.2-linux-x64/3.1/python/bin/python3.10 setup_linux.py build_ext --inplace
# or the following on Mac
CC="${HOMEBREW_PREFIX}/opt/llvm/bin/clang++" /path/to/Blender.app/Contents/Resources/3.1/python/bin/python3.10 setup_macos.py build_ext --inplace
```

## Docker Instructions

We also provide instructions for running our system in a docker container.

### Linux

Install the Docker Engine by following the steps [here](https://docs.docker.com/engine/install/ubuntu/)

In `/procgen/`, run

```
cd docker
```

```
bash make_docker.sh
```

Alternatively, to run Infinigen without GPU passthrough in the Docker container, run `bash make_docker.sh --noGPU`

```
docker exec -it infinigen bash
```

```
source setup.sh
```

### Windows

[Install](https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview) WSL 2 (with WSLg) and Ubuntu. Make sure that you are either on the latest version of Windows 10 or on Windows 11.

In Powershell, run `wsl -l -v` to verify that WSL is using version 2. If not, refer to [this](https://learn.microsoft.com/en-us/windows/wsl/install#upgrade-version-from-wsl-1-to-wsl-2.) guide on upgrading.

Install [Docker Desktop](https://www.docker.com/products/docker-desktop/) and make sure that "Use the WSL 2 based engine ..." is enabled in Settings. Keep the Docker Desktop application running.

In Powershell, run `ubuntu` to enter the Linux subsystem and then run

```
git clone https://github.com/princeton-vl/procgen.git
```

Make sure that you have a valid [SSH key](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent) in the Linux subsystem.

Verify that `echo $DISPLAY` returns `:0`. If not, WSLg was not properly installed.

Then,

```
cd docker
```

```
bash make_docker.sh
```

In Docker Desktop, you should see that there is now an active container. Run

```
docker exec -it infinigen bash
```

```
source setup.sh
```

### Apple Silicon (M1/M2)

Infinigen does not support containers for Apple Silicon devices due to issues in Docker's emulation of x86 architecture.
